// Traducciones del portafolio
const traducciones = {
  es: {
    // Header
    nav_inicio: "Inicio",
    nav_sobre_mi: "Sobre mi",
    nav_lenguajes: "Lenguajes",
    nav_proyectos: "Proyectos",
    nav_contacto: "Contacto",
    portafolio: "Portafolio",

    // Main - Inicio
    desarrollador: "Desarrollador de software",
    descripcion_inicio: "Desarrollador Full Stack especializado en Backend <br /> creando soluciones robustas y escalables con código limpio y eficiente",
    github_text: "Git Hub",
    linkedin_text: "LinkedIn",
    descargar_cv: "Descargar CV",
    ver_proyectos: "Ver proyectos",

    // Sobre mi
    titulo_sobre_mi: "Sobre mi",
    descripcion_sobre_mi: `Soy Michael David Barillas Núñez, desarrollador de software orientado a resultados con expertise en desarrollo Backend. Mi enfoque principal es transformar requisitos de negocio en soluciones técnicas eficientes, escalables y mantenibles.<br /><br />

Con experiencia comprobada en Python, C#, SQL y tecnologías web, he desarrollado múltiples proyectos que incluyen sistemas de gestión, APIs RESTful y aplicaciones web completas. Mi conocimiento en Linux me permite gestionar y optimizar servidores para garantizar el mejor rendimiento de las aplicaciones.<br /><br />

Aporto no solo habilidades técnicas sólidas, sino también capacidad de trabajo en equipo, comunicación efectiva capacidad analítica para resolver problemas complejos, aprendizaje continuo de nuevas tecnologías, y dedicación a entregar software de alta calidad que cumpla con los más altos estándares profesionales.`,

    // Habilidades blandas
    creatividad: "Creatividad",
    trabajo_equipo: "Trabajo en equipo",
    pensamiento_critico: "Pensamiento crítico",
    adaptibilidad: "Adaptabilidad",
    resolucion_problemas: "Resolución de problemas",
    proactividad: "Proactividad",
    gestion_tiempo: "Gestión de tiempo",

    // Especializaciones
    backend: "Backend",
    base_datos: "Base de datos",
    desarrollo_web: "Desarrollo Web",
    desarrollo_software: "Desarrollo Software",

    especialidad_backend_titulo: "Desarrollo Backend",
    especialidad_backend_desc: "Diseño e implementación de APIs RESTful con Python y C#, gestión de bases de datos relacionales, optimización de consultas y arquitectura de servidores Linux.",

    especialidad_db_titulo: "Bases de Datos",
    especialidad_db_desc: "Diseño, normalización e implementación de bases de datos relacionales con SQL Server y MySQL. Optimización de consultas y modelado eficiente de datos.",

    especialidad_web_titulo: "Desarrollo Web",
    especialidad_web_desc: "Creación de interfaces responsive con HTML5, CSS3 y JavaScript. Desarrollo de aplicaciones web dinámicas e interactivas con enfoque en UX/UI.",

    especialidad_software_titulo: "Desarrollo de Software",
    especialidad_software_desc: "Análisis de requisitos, diseño de arquitecturas escalables y desarrollo de aplicaciones empresariales con metodologías ágiles y buenas prácticas de código.",

    // Lenguajes de programación
    titulo_lenguajes: "Lenguajes de Programación",
    herramientas: "Herramientas",

    // Proyectos
    titulo_proyectos: "Proyectos",
    ver_codigo: "Ver código",
    cerrar: "Cerrar",

    proyecto1_titulo: "Calculadora Mallas Electrosoldadas",
    proyecto1_desc: "Aplicación web interactiva desarrollada con HTML, CSS y JavaScript que calcula materiales necesarios para construcción de mallas electrosoldadas. Incluye interfaz intuitiva y cálculos precisos en tiempo real.",

    proyecto2_titulo: "Algoritmo de Clasificación de Figuras Geométricas",
    proyecto2_desc: "Sistema basado en Machine Learning con Python y scikit-learn que clasifica figuras geométricas (triángulos, cuadrados, círculos) usando análisis de imágenes. Implementa preprocesamiento de datos, entrenamiento de modelo y evaluación de precisión.",

    proyecto3_titulo: "API de Listado de Productos",
    proyecto3_desc: "API RESTful desarrollada en C# con Entity Framework que gestiona un catálogo de productos. Implementa operaciones CRUD completas, validación de datos y respuestas JSON estructuradas.",

    proyecto4_titulo: "Sistema de Gestión Académica",
    proyecto4_desc: "Aplicación de escritorio en C# con Windows Forms para administración de instituciones educativas. Gestiona datos de estudiantes, docentes, materias y calificaciones con base de datos SQL Server.",

    proyecto5_titulo: "API del Tribunal Supremo de Elecciones",
    proyecto5_desc: "API web scraping desarrollada en Python que extrae y estructura información oficial del TSE de Costa Rica. Implementa técnicas de scraping automatizado, limpieza de datos y exposición vía endpoints RESTful.",

    proyecto6_titulo: "Sistema de Automatización de Documentos Administrativos",
    proyecto6_desc: "Aplicación de escritorio desarrollada en Python (PyQt5) para el procesamiento y gestión de documentos administrativos. El sistema permite extraer información relevante desde archivos Word y generar borradores estructurados mediante integración con APIs de inteligencia artificial. Incluye gestión multi-entidad, validación de datos, almacenamiento persistente y exportación de reportes en Excel. <br> Desarrollado durante una práctica profesional en el buffet de abogados XperttaLegal, por confidencialidad no puedo entrar en detalles del proyecto pero esta respaldado por un certificado emitido por la empresa.",

    proyecto7_titulo: "Sistema Automatizado de Monitoreo y Análisis de Publicaciones Judiciales",
    proyecto7_desc: "Sistema desarrollado en Python para la extracción, procesamiento y análisis de información pública proveniente de fuentes oficiales. Automatiza la recolección diaria de publicaciones, integra datos externos mediante APIs, aplica análisis asistido por inteligencia artificial para clasificación de registros relevantes y genera reportes estructurados en Excel. La solución fue diseñada para ejecutarse de forma programada en infraestructura cloud run (Google Cloud), garantizando operación continua y escalable <br> Desarrollado durante una práctica profesional en el buffet de abogados XperttaLegal, respaldado por certificación emitida por la empresa.",

    // Contacto
    titulo_contacto: "Contacto",
    correo: "Correo",
    nombre: "Nombre",
    tu_nombre: "Tu nombre",
    email: "Email",
    tu_correo: "Tu correo",
    mensaje: "Mensaje",
    tu_mensaje: "Tu mensaje",
    enviar_mensaje: "Enviar Mensaje",
    ubicacion: "San José - Costa Rica",
    github_titulo: "Github",
    github_desc: "La mejor forma de ver mi trabajo",
    linkedin_titulo: "LinkedIn",
    linkedin_desc: "Para oportunidades profesionales",
    ver_perfil: "Ver mi perfil",

    // Footer
    footer_descripcion: "Desarrollador Full Stack especializado en Backend creando soluciones robustas y escalables con código limpio y eficiente",
    footer_navegacion: "Navegación",
    footer_contacto_titulo: "Contacto",
    footer_disponible: "Disponible en Git Hub y LinkedIn",
    footer_ubicacion: "Costa Rica, San José",
    trabajemos_juntos: "Trabajemos juntos",
    derechos: "&copy;2025 Michael Barillas Nuñez - Portafolio"
  },
  en: {
    // Header
    nav_inicio: "Home",
    nav_sobre_mi: "About me",
    nav_lenguajes: "Languages",
    nav_proyectos: "Projects",
    nav_contacto: "Contact",
    portafolio: "Portfolio",

    // Main - Inicio
    desarrollador: "Software Developer",
    descripcion_inicio: "Full Stack Developer specialized in Backend <br /> creating robust and scalable solutions with clean and efficient code",
    github_text: "Git Hub",
    linkedin_text: "LinkedIn",
    descargar_cv: "Download CV",
    ver_proyectos: "View projects",

    // Sobre mi
    titulo_sobre_mi: "About me",
    descripcion_sobre_mi: `I am Michael David Barillas Núñez, a results-oriented software developer with expertise in Backend development. My main focus is to transform business requirements into efficient, scalable and maintainable technical solutions.<br /><br />

With proven experience in Python, C#, SQL and web technologies, I have developed multiple projects including management systems, RESTful APIs and complete web applications. My knowledge in Linux allows me to manage and optimize servers to ensure the best performance of applications.<br /><br />

I bring not only solid technical skills, but also teamwork ability, effective communication, analytical capacity to solve complex problems, continuous learning of new technologies, and dedication to delivering high-quality software that meets the highest professional standards.`,

    // Habilidades blandas
    creatividad: "Creativity",
    trabajo_equipo: "Teamwork",
    pensamiento_critico: "Critical thinking",
    adaptibilidad: "Adaptability",
    resolucion_problemas: "Problem solving",
    proactividad: "Proactivity",
    gestion_tiempo: "Time management",

    // Especializaciones
    backend: "Backend",
    base_datos: "Database",
    desarrollo_web: "Web Development",
    desarrollo_software: "Software Development",

    especialidad_backend_titulo: "Backend Development",
    especialidad_backend_desc: "Design and implementation of RESTful APIs with Python and C#, relational database management, query optimization and Linux server architecture.",

    especialidad_db_titulo: "Databases",
    especialidad_db_desc: "Design, normalization and implementation of relational databases with SQL Server and MySQL. Query optimization and efficient data modeling.",

    especialidad_web_titulo: "Web Development",
    especialidad_web_desc: "Creation of responsive interfaces with HTML5, CSS3 and JavaScript. Development of dynamic and interactive web applications with focus on UX/UI.",

    especialidad_software_titulo: "Software Development",
    especialidad_software_desc: "Requirements analysis, scalable architecture design and enterprise application development with agile methodologies and code best practices.",

    // Lenguajes de programación
    titulo_lenguajes: "Programming Languages",
    herramientas: "Tools",

    // Proyectos
    titulo_proyectos: "Projects",
    ver_codigo: "View code",
    cerrar: "Close",

    proyecto1_titulo: "Electrowelded Mesh Calculator",
    proyecto1_desc: "Interactive web application developed with HTML, CSS and JavaScript that calculates materials needed for electrowelded mesh construction. Includes intuitive interface and precise real-time calculations.",

    proyecto2_titulo: "Geometric Figures Classification Algorithm",
    proyecto2_desc: "Machine Learning based system with Python and scikit-learn that classifies geometric figures (triangles, squares, circles) using image analysis. Implements data preprocessing, model training and accuracy evaluation.",

    proyecto3_titulo: "Product Listing API",
    proyecto3_desc: "RESTful API developed in C# with Entity Framework that manages a product catalog. Implements complete CRUD operations, data validation and structured JSON responses.",

    proyecto4_titulo: "Academic Management System",
    proyecto4_desc: "Desktop application in C# with Windows Forms for educational institution administration. Manages student, teacher, subject and grade data with SQL Server database.",

    proyecto5_titulo: "Electoral Supreme Court API",
    proyecto5_desc: "Web scraping API developed in Python that extracts and structures official information from Costa Rica's TSE. Implements automated scraping techniques, data cleaning and exposure via RESTful endpoints.",

    proyecto6_titulo: "Administrative Documents Automation System",
    proyecto6_desc: "Desktop application developed in Python (PyQt5) for administrative document processing and management. The system allows extracting relevant information from Word files and generating structured drafts through integration with artificial intelligence APIs. Includes multi-entity management, data validation, persistent storage and Excel report export. <br> Developed during a professional internship at the XperttaLegal law firm, due to confidentiality I cannot go into details of the project but it is backed by a certificate issued by the company.",

    proyecto7_titulo: "Automated Monitoring and Analysis System for Judicial Publications",
    proyecto7_desc: "System developed in Python for extraction, processing and analysis of public information from official sources. Automates daily collection of publications, integrates external data through APIs, applies AI-assisted analysis for classification of relevant records and generates structured reports in Excel. The solution was designed to run on a scheduled basis on cloud run infrastructure (Google Cloud), ensuring continuous and scalable operation <br> Developed during a professional internship at the XperttaLegal law firm, supported by certification issued by the company.",

    // Contacto
    titulo_contacto: "Contact",
    correo: "Email",
    nombre: "Name",
    tu_nombre: "Your name",
    email: "Email",
    tu_correo: "Your email",
    mensaje: "Message",
    tu_mensaje: "Your message",
    enviar_mensaje: "Send Message",
    ubicacion: "San José - Costa Rica",
    github_titulo: "Github",
    github_desc: "The best way to see my work",
    linkedin_titulo: "LinkedIn",
    linkedin_desc: "For professional opportunities",
    ver_perfil: "View my profile",

    // Footer
    footer_descripcion: "Full Stack Developer specialized in Backend creating robust and scalable solutions with clean and efficient code",
    footer_navegacion: "Navigation",
    footer_contacto_titulo: "Contact",
    footer_disponible: "Available on Git Hub and LinkedIn",
    footer_ubicacion: "Costa Rica, San José",
    trabajemos_juntos: "Let's work together",
    derechos: "&copy;2025 Michael Barillas Nuñez - Portfolio"
  }
};

// Función para cambiar el idioma
function cambiarIdioma(idioma) {
  const t = traducciones[idioma];

  try {
    // Header - navegación principal
    const navLinks = document.querySelectorAll('header > nav > a');
    if (navLinks.length >= 5) {
      navLinks[0].textContent = t.nav_inicio;
      navLinks[1].textContent = t.nav_sobre_mi;
      navLinks[2].textContent = t.nav_lenguajes;
      navLinks[3].textContent = t.nav_proyectos;
      navLinks[4].textContent = t.nav_contacto;
    }
    
    // Menu móvil
    const menuLinks = document.querySelectorAll('#menu > a');
    if (menuLinks.length >= 5) {
      menuLinks[0].textContent = t.nav_inicio;
      menuLinks[1].textContent = t.nav_sobre_mi;
      menuLinks[2].textContent = t.nav_lenguajes;
      menuLinks[3].textContent = t.nav_proyectos;
      menuLinks[4].textContent = t.nav_contacto;
    }
    
    const portafolioTitle = document.querySelector('header div h3');
    if (portafolioTitle) portafolioTitle.textContent = t.portafolio;

    // Main - Inicio
    const mainH3 = document.querySelector('main h3');
    if (mainH3) mainH3.textContent = t.desarrollador;
    
    const mainH4 = document.querySelector('main h4');
    if (mainH4) mainH4.innerHTML = t.descripcion_inicio;
    
    // Botones del inicio - usar querySelectorAll más específico
    const mainBotones = document.querySelectorAll('main > div:last-child a');
    if (mainBotones.length >= 3) {
      // Botón GitHub/LinkedIn (pueden variar según la versión)
      const githubBtn = mainBotones[0];
      if (githubBtn && githubBtn.href.includes('github')) {
        const githubText = githubBtn.childNodes;
        for (let node of githubText) {
          if (node.nodeType === Node.TEXT_NODE && node.textContent.trim()) {
            node.textContent = " " + t.github_text;
            break;
          }
        }
      }
      
      // Botón LinkedIn (si existe)
      const linkedinBtn = Array.from(mainBotones).find(btn => btn.href && btn.href.includes('linkedin'));
      if (linkedinBtn) {
        const linkedinText = linkedinBtn.childNodes;
        for (let node of linkedinText) {
          if (node.nodeType === Node.TEXT_NODE && node.textContent.trim()) {
            node.textContent = " " + t.linkedin_text;
            break;
          }
        }
      }
      
      // Botón Descargar CV
      const cvDownloadBtn = document.querySelector('a[download].boton-boing');
      if (cvDownloadBtn) {
        const cvText = cvDownloadBtn.childNodes;
        for (let node of cvText) {
          if (node.nodeType === Node.TEXT_NODE && node.textContent.trim()) {
            node.textContent = " " + t.descargar_cv;
            break;
          }
        }
      }
      
      // Botón Ver proyectos
      const verProyectosBtn = document.querySelector('a[href="#proyectos"]#CV_Proyectos');
      if (verProyectosBtn) {
        const proyText = verProyectosBtn.childNodes;
        for (let node of proyText) {
          if (node.nodeType === Node.TEXT_NODE && node.textContent.trim()) {
            node.textContent = " " + t.ver_proyectos;
            break;
          }
        }
      }
    }

    // Sobre mi
    const sobreMiTitle = document.querySelector('#Sobre_mi');
    if (sobreMiTitle) sobreMiTitle.textContent = t.titulo_sobre_mi;
    
    const datosH4 = document.querySelector('#datos h4');
    if (datosH4) datosH4.innerHTML = t.descripcion_sobre_mi;

    // Habilidades blandas
    const habilidades = document.querySelectorAll('.Habilidades_blandas p:first-child');
    const habilidadesTextos = [
      t.creatividad,
      t.trabajo_equipo,
      t.pensamiento_critico,
      t.adaptibilidad,
      t.resolucion_problemas,
      t.proactividad,
      t.gestion_tiempo
    ];
    
    habilidades.forEach((habilidad, index) => {
      if (habilidadesTextos[index]) {
        habilidad.textContent = habilidadesTextos[index];
      }
    });

    // Especializaciones (barras)
    const barrasH4 = document.querySelectorAll('#contenedorBarras h4:nth-child(3)');
    const barrasTextos = [t.backend, t.base_datos, t.desarrollo_web, t.desarrollo_software];
    
    barrasH4.forEach((barra, index) => {
      if (barrasTextos[index]) {
        barra.textContent = barrasTextos[index];
      }
    });

    // Tarjetas de especialización
    const tarjetas = document.querySelectorAll('.tarjetas_especializaciones');
    if (tarjetas.length >= 4) {
      tarjetas[0].querySelector('h1').textContent = t.especialidad_backend_titulo;
      tarjetas[0].querySelector('h3').textContent = t.especialidad_backend_desc;
      
      tarjetas[1].querySelector('h1').textContent = t.especialidad_db_titulo;
      tarjetas[1].querySelector('h3').textContent = t.especialidad_db_desc;
      
      tarjetas[2].querySelector('h1').textContent = t.especialidad_web_titulo;
      tarjetas[2].querySelector('h3').textContent = t.especialidad_web_desc;
      
      tarjetas[3].querySelector('h1').textContent = t.especialidad_software_titulo;
      tarjetas[3].querySelector('h3').textContent = t.especialidad_software_desc;
    }

    // Botón CV Sobre mi
    const cvSobreMi = document.querySelector('#CV_Sobre_mi');
    if (cvSobreMi) {
      const cvSobreMiText = cvSobreMi.childNodes;
      for (let node of cvSobreMiText) {
        if (node.nodeType === Node.TEXT_NODE && node.textContent.trim()) {
          node.textContent = " " + t.descargar_cv;
          break;
        }
      }
    }

    // Lenguajes de programación
    const tituloLenguajes = document.querySelector('#tituloLenguajes');
    if (tituloLenguajes) tituloLenguajes.textContent = t.titulo_lenguajes;
    
    // Herramientas - buscar el h1 que contiene "Herramientas"
    const allH1 = document.querySelectorAll('h1');
    allH1.forEach(h1 => {
      if (h1.textContent.includes('Herramientas') || h1.textContent.includes('Tools')) {
        h1.textContent = t.herramientas;
      }
    });

    // Proyectos
    const proyectosTitle = document.querySelector('#proyectos');
    if (proyectosTitle) proyectosTitle.textContent = t.titulo_proyectos;
    
    const proyectos = document.querySelectorAll('.Proyectos');
    const proyectosData = [
      { titulo: t.proyecto1_titulo, desc: t.proyecto1_desc },
      { titulo: t.proyecto2_titulo, desc: t.proyecto2_desc },
      { titulo: t.proyecto3_titulo, desc: t.proyecto3_desc },
      { titulo: t.proyecto4_titulo, desc: t.proyecto4_desc },
      { titulo: t.proyecto5_titulo, desc: t.proyecto5_desc },
      { titulo: t.proyecto6_titulo, desc: t.proyecto6_desc },
      { titulo: t.proyecto7_titulo, desc: t.proyecto7_desc }
    ];
    
    proyectos.forEach((proyecto, index) => {
      if (proyectosData[index]) {
        const h4 = proyecto.querySelector('h4');
        const p = proyecto.querySelector('p:first-of-type, p.limitado');
        
        if (h4) h4.textContent = proyectosData[index].titulo;
        if (p) p.innerHTML = proyectosData[index].desc;
      }
    });

    // Botones de proyectos
    document.querySelectorAll('.boton_proyecto').forEach(boton => {
      boton.textContent = t.ver_codigo;
    });
    
    document.querySelectorAll('.cerrar_proyecto').forEach(boton => {
      boton.textContent = t.cerrar;
    });

    // Contacto
    const contactoTitle = document.querySelector('#Contacto');
    if (contactoTitle) contactoTitle.textContent = t.titulo_contacto;
    
    const correoH1 = document.querySelector('#correo h1');
    if (correoH1) correoH1.textContent = t.correo;
    
    const formLabels = document.querySelectorAll('#correo form h4');
    if (formLabels.length >= 3) {
      formLabels[0].textContent = t.nombre;
      formLabels[1].textContent = t.email;
      formLabels[2].textContent = t.mensaje;
    }
    
    const inputName = document.querySelector('input[name="name"]');
    if (inputName) inputName.placeholder = t.tu_nombre;
    
    const inputEmail = document.querySelector('input[name="email"]');
    if (inputEmail) inputEmail.placeholder = t.tu_correo;
    
    const textarea = document.querySelector('textarea[name="message"]');
    if (textarea) textarea.placeholder = t.tu_mensaje;
    
    const submitBtn = document.querySelector('#correo button[type="submit"]');
    if (submitBtn) submitBtn.textContent = t.enviar_mensaje;
    
    const ubicacionP = document.querySelector('#correo p:last-child');
    if (ubicacionP) ubicacionP.textContent = t.ubicacion;

    // Tarjetas de contacto
    const tarjetasContacto = document.querySelectorAll('.contenedor_contacto > div:last-child > div');
    if (tarjetasContacto.length >= 2) {
      const githubCard = tarjetasContacto[0];
      const linkedinCard = tarjetasContacto[1];
      
      if (githubCard) {
        const gh1 = githubCard.querySelector('h1');
        const gp = githubCard.querySelector('p');
        const ga = githubCard.querySelector('a');
        if (gh1) gh1.textContent = t.github_titulo;
        if (gp) gp.textContent = t.github_desc;
        if (ga) ga.textContent = t.ver_perfil;
      }
      
      if (linkedinCard) {
        const lh1 = linkedinCard.querySelector('h1');
        const lp = linkedinCard.querySelector('p');
        const la = linkedinCard.querySelector('a');
        if (lh1) lh1.textContent = t.linkedin_titulo;
        if (lp) lp.textContent = t.linkedin_desc;
        if (la) la.textContent = t.ver_perfil;
      }
    }

    // Footer
    const footerP = document.querySelector('.footer_Portafolio p');
    if (footerP) footerP.textContent = t.footer_descripcion;
    
    const navFooterH2 = document.querySelector('.footer_navegacion h2');
    if (navFooterH2) navFooterH2.textContent = t.footer_navegacion;
    
    const navFooter = document.querySelectorAll('.footer_navegacion a');
    if (navFooter.length >= 5) {
      navFooter[0].textContent = t.nav_inicio;
      navFooter[1].textContent = t.nav_sobre_mi;
      navFooter[2].textContent = t.nav_lenguajes;
      navFooter[3].textContent = t.nav_proyectos;
      navFooter[4].textContent = t.nav_contacto;
    }
    
    const footerContacto = document.querySelector('.footer_Contacto');
    if (footerContacto) {
      const fch2 = footerContacto.querySelector('h2');
      const fcp = footerContacto.querySelectorAll('p');
      const fca = footerContacto.querySelector('a');
      
      if (fch2) fch2.textContent = t.footer_contacto_titulo;
      if (fcp.length >= 2) {
        fcp[0].textContent = t.footer_disponible;
        fcp[1].textContent = t.footer_ubicacion;
      }
      if (fca) fca.textContent = t.trabajemos_juntos;
    }
    
    const footerCopy = document.querySelector('footer > div:last-child h4');
    if (footerCopy) footerCopy.innerHTML = t.derechos;

    // Guardar preferencia
    localStorage.setItem('idioma', idioma);
    
    console.log('Idioma cambiado a:', idioma);
  } catch (error) {
    console.error('Error al cambiar idioma:', error);
  }
}

// Detectar idioma del navegador
function detectarIdioma() {
  const idiomaGuardado = localStorage.getItem('idioma');
  if (idiomaGuardado) {
    return idiomaGuardado;
  }
  
  const idiomaNavegador = navigator.language || navigator.userLanguage;
  return idiomaNavegador.startsWith('es') ? 'es' : 'en';
}

// Inicialización
window.addEventListener('DOMContentLoaded', () => {
  const btnIdioma = document.getElementById('btn-idioma');
  
  if (!btnIdioma) {
    console.error('No se encontró el botón de idioma. Asegúrate de que existe un elemento con id="btn-idioma"');
    return;
  }
  
  const idiomaActual = detectarIdioma();
  
  // Aplicar idioma inicial
  cambiarIdioma(idiomaActual);
  
  // Actualizar texto del botón
  btnIdioma.textContent = idiomaActual === 'es' ? 'EN' : 'ES';
  
  // Toggle entre idiomas
  btnIdioma.addEventListener('click', () => {
    const nuevoIdioma = btnIdioma.textContent === 'EN' ? 'en' : 'es';
    cambiarIdioma(nuevoIdioma);
    btnIdioma.textContent = nuevoIdioma === 'es' ? 'EN' : 'ES';
  });
  
  console.log('Sistema de idiomas inicializado');
});